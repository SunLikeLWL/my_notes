# Javascript知识点


## 1、Set和Map的却别


### Set

1、set以RBTree作为底层容器；
2、所得元素的只有key没有value，value就是key
3、不允许出现键值重复
4、所有元素都会被自动排序
5、不能通过迭代器来改变set的值，以为set的值就是键

### map

map和set一样是关联式容器，他们的底层容器都是红黑树，
区别就在于map的值不作为键，键和值是分开的。
1、map以RBTree作为底层容器
2、所有元素都是键+值存在
3、不允许键重复
4、所有元素都是通过键进行排序




## 2、反向代理


实践中顾客无法直接跟服务器发起请求的时候，
我们就需要代理服务器，代理可以实现客户端与
服务器端之间的通信，我们的Nginx也可以实现相应的代理服务。
代理分为正向代理和反向代理

### 正向代理
顾客需要访问一个服务器，但是他可能无法直接访问这台服务器，这时候
可以找一台可以访问目标服务器的另一台服务器，而这台服务器就被当做代理人的角色，称之为代理服务器，于是客户端吧请求发给代理服务器，由代理服务器
获得目标服务器的数据并返回给客户端。客户端的清除目标服务器的地址的，而目标服务器是不清楚客户端，他只知道来自哪个代理服务器，所以正向代理可以屏蔽活隐藏客户端的信息



### 反向代理
方向代理就是代理服务器为服务器代理人，站在服务器这边，他就是对屏蔽了服务器信息，常用的场景就是多台服务器分布式部署，像一些大型网站，由于访问人数很多，就需要多台服务器来解决人数多的问题，这时候这些服务器就由一个反向代理服务器来代理，客户端发动请求，先由反向代理服务器，然后按一定的规则分发到明确的服务器，而顾客端不知道是那台服务器。


Nginx负载均衡


负载：就是Nginx接受请求


均衡：Nginx讲收到的请求按照一定的规则分发到不同的服务器进行处理




## 3、Hook技术

Hook技术又叫钩子函数，在系统没有调用该函数之前，钩子程序就先得到了控制权，这时候钩子函数既可以加工处理（改变）该函数的执行行为，还可以强制结束消息的传递。简单来说，就是把系统的程序拉出来变成我门自己执行代码片段。

要实现钩子函数，有两个步骤：
1、利用系统内部提供的接口，通过实现该接口，然后注入进系统（特定场景下使用）
2、动态代理（使用所有场景）



## 4、XSS攻击
XSS全称是Cross Site Scripting(为了区分CSS进行区分，就叫XSS)即跨站脚本
XSS的重点不在于跨站，而是在于脚本的执行；
XSS是一种在web应用中的计算机安全漏洞，是由于web应用的输入过滤不足而产生的
他允许恶意web用户将代码植入到提供给用户使用的页面中
### 分类
1、非持久型（反射型/DOM-based型）

2、持久型（存储型）


### 防御技术

1、对输入进行过滤：csp（网页安全策略）

2、对输出进行编码：转义字符





## 5、同源策略

### 定义与限制
如果两个url的协议、域名、端口号都相同，我们称这两个url同源。
1、同源策略限制了来自不同源的javascript脚本对当前DOM对象读和写的操作；
2、同源策略限制了不同源的站点读取当前站点的Cookie、IndexDB、LocalStorage等数据；
3、同源策略限制了通过XMLHttpRequest等方式将站点的数据发送给不同源的站点

### 解决方案
1、跨文档消息机制：可以通过window.postMessage的javascript接口和不同源的DOM进行通信
2、跨域资源共享（CORS）：跨域资源在服务器端设置允许跨域，就可以进行跨域访问控制，从而使跨域数据传输得以安全进行；
 3、内容安全策略（CSP）：主要以白名单的形式配置可信任的内容来源，在网页中，能够使白明单的内容正常执行（包块js，css，image等），而非白名单的内容无法正常执行；



 ## 6、CSRF跨站点请求伪造（Cross Site Request Forgery）
 攻击者盗用你的身份，以你的名义发送恶意请求，对服务器来说这个请求是完全合法的，但是却完成了一次攻击者所期望的一个操作，

### CSRF漏洞检测


### 防御CSRF攻击




## 7、图片懒加载

懒加载或者按需加载，是一种很好的优化网页或者应用的方式。
这种方式实际上是先把你的代码在一些逻辑断点处分离开，
然后在一些代码块中完成某些操作后，立即引用或者即将引用
另一些新的代码块。这样加快了应用的初始化加载速度，减轻了
他的总体体积，因为某些代码可能永远不会被加载到。


存在形式：
1、浏览网页，准备往下拖动滚动条
2、拖动一个占位图到视窗
3、占位图片被瞬间替换成最终图片










